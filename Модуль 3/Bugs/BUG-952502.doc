<!doctype html><html><head><title>[#BUG-952502] Статус 200 Ok при отправке POST /fast-delivery/v3.1.1/calculate-delivery.xml с передачей в параметр deliveryTime спецсимвола</title><meta http-equiv="Content-Type" content="application/vnd.ms-word; charset=UTF-8"/><style>.tableBorder, .grid { background-color: #fff; width: 100%; border-collapse: collapse; }.tableBorder td, .grid td { vertical-align: top; padding: 2px; border: 1px solid #ccc; }.noPadding { padding: 0 !important; }h3 .subText { font-size: 60%; font-weight: normal; }td.blank { padding: 0; margin: 0; }.blank td { border: none; }#descriptionArea { margin: 0; padding: 2px; border: 1px solid #ccc; }</style></head><body><table class="tableBorder" cellpadding="0" cellspacing="0" style="border:0;width:100%"><tr><td colspan="2" style="background-color:#f0f0f0;width:100%;vertical-align:top"><h3>[BUG-952502]&nbsp;<a href="https://tracker.yandex.ru/r/BUG-952502?source_from=doc&source_type=export">Статус 200 Ok при отправке POST /fast-delivery/v3.1.1/calculate-delivery.xml с передачей в параметр deliveryTime спецсимвола</a><span class="subText"> Создано: 26 сентября 2022 в 19:24&nbsp;Обновлено: 26 сентября 2022 в 19:24</span></h3></td></tr><tr><td style="width:20%"><b>Статус:</b></td><td style="width:80%">Открыт</td></tr><tr><td style="width:20%"><b>Очередь:</b></td><td style="width:80%"><a href="https://tracker.yandex.ru/r/BUG">Баг-репорты</a></td></tr><tr><td><b>Компоненты:</b></td><td>Нет компонента</td></tr><tr><td><b>Найдено в версиях:</b></td><td>Без версии</td></tr><tr><td><b>Исправить в версиях:</b></td><td>Без версии</td></tr></table><br/><table class="grid" cellpadding="0" cellspacing="0" style="border:0;width:100%"><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Тип:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%">Ошибка</td><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Приоритет:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%;white-space:nowrap">Критичный</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Автор:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%"><a href="https://staff.yandex.ru/kombarow?org=6912661">Александр Комбаров</a></td><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Исполнитель:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%;white-space:nowrap">Нет исполнителя</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Резолюция:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%">Не разрешен</td><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Проект:</b></td><td style="background-color:#ffffff;vertical-align:top;width:30%">Без проекта</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Теги:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top">Нет тега</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Оценка:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;white-space:nowrap;width:80%">Не задана</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Затрачено времени:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;white-space:nowrap;width:80%">Не задано</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Первоначальная оценка:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;white-space:nowrap;width:80%">Не задана</td></tr></table><br/><table class="grid" cellpadding="0" cellspacing="0" style="border:0;width:100%"><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Вложения:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top"><a href="https://tracker.yandex.ru/r/attachment/BUG-952502/1034453" title="47cURL.txt">47cURL.txt</a>, <a href="https://tracker.yandex.ru/r/attachment/BUG-952502/1034454" title="47Response.txt">47Response.txt</a>, <a href="https://tracker.yandex.ru/r/attachment/BUG-952502/1034455" title="47Log.txt">47Log.txt</a>, <a href="https://tracker.yandex.ru/r/attachment/BUG-952502/1034456" title="47Screen.jpg">47Screen.jpg</a></td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Изменил:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;width:80%"><a href="https://staff.yandex.ru/kombarow?org=6912661">Александр Комбаров</a></td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Комментариев без сообщения:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;width:80%">0</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Комментариев с сообщением:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;width:80%">0</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Проголосовало:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;width:80%">0</td></tr><tr><td style="background-color:#f0f0f0;vertical-align:top;width:20%"><b>Статус изменен:</b></td><td colspan="3" style="background-color:#ffffff;vertical-align:top;width:80%">26 сентября 2022 в 19:24</td></tr></table><br/><table cellpadding="2" cellspacing="0" align="center" style="border:0;width:100%"><tr><td align="center" style="background-color:#bbbbbb;width:1%;white-space:nowrap">&nbsp;<font style="color:#ffffff"><b>Описание</b></font>&nbsp;</td><td>&nbsp;</td></tr></table><table cellpadding="0" cellspacing="0" style="border:0;width:100%"><tr><td id="descriptionArea"><p><strong>Окружение:</strong></p>
<ol>
<li>Адрес сервера:   <a href="https://5de60f24-14de-4ba4-a336-a28da85dee02.serverhub.praktikum-services.ru" target="_blank" rel="noreferrer noopener">https://5de60f24-14de-4ba4-a336-a28da85dee02.serverhub.praktikum-services.ru</a></li>
<li>Версия API: 3.1.1</li>
</ol>
<p><strong>Шаги воспроизведения:</strong></p>
<ol>
<li>Отправить POST /fast-delivery/v3.1.1/calculate-delivery.xml<br />
В теле указать:</li>
</ol>

    <div class="yfm-clipboard">
    <pre><code class="hljs xml">            <span class="hljs-tag">&lt;<span class="hljs-name">InputModel</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">productsCount</span>&gt;</span>13<span class="hljs-tag">&lt;/<span class="hljs-name">productsCount</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">productsWeight</span>&gt;</span>6.2<span class="hljs-tag">&lt;/<span class="hljs-name">productsWeight</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">deliveryTime</span>&gt;</span>"#"<span class="hljs-tag">&lt;/<span class="hljs-name">deliveryTime</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">InputModel</span>&gt;</span>
</code></pre>

    <svg width="16" height="16" viewbox="0 0 24 24" class="yfm-clipboard-button" data-animation="25">
        <path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path>
        <path stroke="currentColor" fill="transparent" d="M9.5 13l3 3l5 -5" visibility="hidden">
            <animate id="visibileAnimation-25" attributename="visibility" from="hidden" to="visible" dur="0.2s" fill="freeze" begin></animate>
            <animate id="hideAnimation-25" attributename="visibility" from="visible" to="hidden" dur="1s" begin="visibileAnimation-25.end+1" fill="freeze"></animate>
        </path>
    </svg>
    </div>
<p><strong>ОР:</strong> Код и статус ответа 400 Bad Request, ответ в формате xml не пришел<br />
<strong>ФР:</strong> Код и статус ответа 200 Ok, пришел ответ в формате xml с правильной структурой и подтверждением возможности доставки заказа:</p>

    <div class="yfm-clipboard">
    <pre><code class="hljs xml">            <span class="hljs-tag">&lt;<span class="hljs-name">response</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Привезём быстро"</span> <span class="hljs-attr">isItPossibleToDeliver</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">hostDeliveryCost</span>=<span class="hljs-string">"43"</span> <span class="hljs-attr">clientDeliveryCost</span>=<span class="hljs-string">"99"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">toBeDeliveredTime</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">min</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">min</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">max</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">max</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">toBeDeliveredTime</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">response</span>&gt;</span>
</code></pre>

    <svg width="16" height="16" viewbox="0 0 24 24" class="yfm-clipboard-button" data-animation="29">
        <path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path>
        <path stroke="currentColor" fill="transparent" d="M9.5 13l3 3l5 -5" visibility="hidden">
            <animate id="visibileAnimation-29" attributename="visibility" from="hidden" to="visible" dur="0.2s" fill="freeze" begin></animate>
            <animate id="hideAnimation-29" attributename="visibility" from="visible" to="hidden" dur="1s" begin="visibileAnimation-29.end+1" fill="freeze"></animate>
        </path>
    </svg>
    </div>
<br/></td></tr></table>Сформирован 29 сентября 2022 в 14:02 пользователем Александр Комбаров с использованием tracker.yandex.ru</body></html>